<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DiaBRO - –†–µ–¥–∞–∫—Ç–æ—Ä –≤—Ä–∞–≥–æ–≤</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="app">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1>üéÆ DiaBRO</h1>
                <h2>–†–µ–¥–∞–∫—Ç–æ—Ä –≤—Ä–∞–≥–æ–≤</h2>
            </div>
            
            <div class="sidebar-section">
                <h3>–¢–∏–ø—ã –≤—Ä–∞–≥–æ–≤</h3>
                <button class="btn btn-primary btn-full" onclick="createNewEnemy()">
                    + –ù–æ–≤—ã–π —Ç–∏–ø –≤—Ä–∞–≥–∞
                </button>
                <div id="enemy-list" class="enemy-list">
                    <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è -->
                </div>
            </div>
            
            <div class="sidebar-section">
                <h3>–°–ø—Ä–∞–π—Ç—ã</h3>
                <div class="upload-zone" id="upload-zone">
                    <input type="file" id="sprite-upload" accept=".png" hidden>
                    <p>üì§ –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ PNG –∏–ª–∏ –∫–ª–∏–∫–Ω–∏—Ç–µ</p>
                </div>
                <div id="sprite-list" class="sprite-list">
                    <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è -->
                </div>
            </div>
            
            <div class="sidebar-footer">
                <button class="btn btn-secondary btn-full" onclick="exportCode()">
                    üìã –≠–∫—Å–ø–æ—Ä—Ç –∫–æ–¥–∞
                </button>
            </div>
        </aside>
        
        <!-- Main Content -->
        <main class="main-content">
            <div id="editor-panel" class="editor-panel hidden">
                <div class="editor-header">
                    <h2 id="editor-title">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–∞–≥–∞</h2>
                    <button class="btn btn-danger" onclick="deleteEnemy()">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
                </div>
                
                <form id="enemy-form" class="editor-form">
                    <input type="hidden" id="enemy-id">
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="enemy-name">–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                            <input type="text" id="enemy-name" placeholder="–°–∫–µ–ª–µ—Ç">
                        </div>
                        <div class="form-group">
                            <label for="enemy-id-input">ID (–ª–∞—Ç–∏–Ω–∏—Ü–∞)</label>
                            <input type="text" id="enemy-id-input" placeholder="skeleton">
                        </div>
                    </div>
                    
                    <div class="form-section">
                        <h3>–°–ø—Ä–∞–π—Ç</h3>
                        <div class="form-row">
                            <div class="form-group flex-2">
                                <label for="sprite-path">–°–ø—Ä–∞–π—Ç –ø–µ—Ä—Å–æ–Ω–∞–∂–∞</label>
                                <select id="sprite-path">
                                    <option value="">-- –ë–µ–∑ —Å–ø—Ä–∞–π—Ç–∞ --</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="sprite-scale">–ú–∞—Å—à—Ç–∞–± (1.0 = –∏–≥—Ä–æ–∫)</label>
                                <input type="number" id="sprite-scale" value="1.0" step="0.1" min="0.3" max="2.0">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="weapon-path">–°–ø—Ä–∞–π—Ç –æ—Ä—É–∂–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
                            <select id="weapon-path">
                                <option value="">-- –ë–µ–∑ –æ—Ä—É–∂–∏—è --</option>
                            </select>
                        </div>
                        <p class="form-hint">–ú–∞—Å—à—Ç–∞–± 1.0 = —Ä–∞–∑–º–µ—Ä –∏–≥—Ä–æ–∫–∞ (256px). 0.5 = –≤–¥–≤–æ–µ –º–µ–Ω—å—à–µ, 1.5 = –≤ 1.5 —Ä–∞–∑–∞ –±–æ–ª—å—à–µ.</p>
                    </div>
                    
                    <div class="form-section">
                        <h3>–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="max-health">–ó–¥–æ—Ä–æ–≤—å–µ</label>
                                <input type="number" id="max-health" value="30" min="1">
                            </div>
                            <div class="form-group">
                                <label for="damage">–£—Ä–æ–Ω</label>
                                <input type="number" id="damage" value="5" min="1">
                            </div>
                            <div class="form-group">
                                <label for="speed">–°–∫–æ—Ä–æ—Å—Ç—å</label>
                                <input type="number" id="speed" value="6.0" step="0.5" min="0.5" max="20">
                                <span class="input-hint">–ò–≥—Ä–æ–∫: 8.0</span>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="aggro-range">–†–∞–¥–∏—É—Å –∞–≥—Ä–µ—Å—Å–∏–∏</label>
                                <input type="number" id="aggro-range" value="150" step="10" min="0">
                            </div>
                            <div class="form-group">
                                <label for="attack-range">–î–∏—Å—Ç–∞–Ω—Ü–∏—è –∞—Ç–∞–∫–∏</label>
                                <input type="number" id="attack-range" value="1.2" step="0.1" min="0.1">
                            </div>
                            <div class="form-group">
                                <label for="attack-cooldown">–ü–µ—Ä–µ–∑–∞—Ä—è–¥–∫–∞ –∞—Ç–∞–∫–∏</label>
                                <input type="number" id="attack-cooldown" value="1.5" step="0.1" min="0.1">
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-section">
                        <h3>–¢–∏–ø –∞—Ç–∞–∫–∏</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label>–¢–∏–ø –±–æ—è</label>
                                <div class="radio-group">
                                    <label class="radio-label">
                                        <input type="radio" name="attack-type" value="melee" checked>
                                        <span class="radio-icon">‚öîÔ∏è</span>
                                        <span>–ë–ª–∏–∂–Ω–∏–π –±–æ–π</span>
                                    </label>
                                    <label class="radio-label">
                                        <input type="radio" name="attack-type" value="ranged">
                                        <span class="radio-icon">üèπ</span>
                                        <span>–î–∞–ª—å–Ω–∏–π –±–æ–π</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="form-row" id="projectile-row" style="display: none;">
                            <div class="form-group">
                                <label for="projectile-path">–°–ø—Ä–∞–π—Ç —Å–Ω–∞—Ä—è–¥–∞</label>
                                <select id="projectile-path">
                                    <option value="">-- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π (–∫–∞–∫ —É –∏–≥—Ä–æ–∫–∞) --</option>
                                </select>
                                <span class="input-hint">–ó–∞–≥—Ä—É–∑–∏—Ç–µ PNG —Å–ø—Ä–∞–π—Ç —Å–Ω–∞—Ä—è–¥–∞</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-section">
                        <h3>–í–Ω–µ—à–Ω–∏–π –≤–∏–¥ (fallback)</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="color-r">–¶–≤–µ—Ç R</label>
                                <input type="number" id="color-r" value="200" min="0" max="255">
                            </div>
                            <div class="form-group">
                                <label for="color-g">–¶–≤–µ—Ç G</label>
                                <input type="number" id="color-g" value="50" min="0" max="255">
                            </div>
                            <div class="form-group">
                                <label for="color-b">–¶–≤–µ—Ç B</label>
                                <input type="number" id="color-b" value="50" min="0" max="255">
                            </div>
                            <div class="form-group">
                                <label>–ü—Ä–µ–≤—å—é</label>
                                <div id="color-preview" class="color-preview"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary btn-large">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                        <button type="button" class="btn btn-secondary" onclick="cancelEdit()">–û—Ç–º–µ–Ω–∞</button>
                    </div>
                </form>
            </div>
            
            <!-- Sprite Preview -->
            <div id="preview-panel" class="preview-panel">
                <div class="preview-header">
                    <h3>–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–≤</h3>
                    <button id="close-preview-btn" class="btn btn-small btn-close-preview hidden" onclick="closePreview()">‚úï –ó–∞–∫—Ä—ã—Ç—å</button>
                </div>
                <div id="sprite-preview" class="sprite-preview">
                    <p class="placeholder">–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø—Ä–∞–π—Ç –¥–ª—è –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞</p>
                </div>
                <div id="animation-preview" class="animation-preview hidden">
                    <div class="comparison-container">
                        <!-- –ò–≥—Ä–æ–∫ (—Ä–µ—Ñ–µ—Ä–µ–Ω—Å) -->
                        <div class="comparison-item">
                            <canvas id="player-canvas" width="256" height="256"></canvas>
                            <div class="comparison-label">
                                <span class="label-icon">üë§</span>
                                <span>–ò–≥—Ä–æ–∫ (1.0x)</span>
                            </div>
                        </div>
                        
                        <!-- –ü—Ä–æ—Ç–∏–≤–Ω–∏–∫ -->
                        <div class="comparison-item">
                            <canvas id="animation-canvas" width="256" height="256"></canvas>
                            <div class="comparison-label">
                                <span class="label-icon">üëæ</span>
                                <span id="enemy-scale-label">–ü—Ä–æ—Ç–∏–≤–Ω–∏–∫ (1.0x)</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="size-controls">
                        <label for="preview-scale">–†–∞–∑–º–µ—Ä –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞:</label>
                        <input type="range" id="preview-scale" min="0.3" max="2.0" step="0.1" value="1.0">
                        <span id="preview-scale-value">1.0x</span>
                        <button class="btn btn-small" onclick="applyScaleToForm()">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
                    </div>
                    
                    <div class="animation-controls">
                        <button class="btn btn-small" onclick="prevDirection()">‚óÄ</button>
                        <span id="direction-label">–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: 0</span>
                        <button class="btn btn-small" onclick="nextDirection()">‚ñ∂</button>
                    </div>
                    
                    <div class="animation-info">
                        <p>–§–æ—Ä–º–∞—Ç —Å–ø—Ä–∞–π—Ç—à–∏—Ç–∞: 8 —Å—Ç—Ä–æ–∫ √ó 8 —Å—Ç–æ–ª–±—Ü–æ–≤, 256√ó256 px/–∫–∞–¥—Ä</p>
                        <p>–ú–∞—Å—à—Ç–∞–± 1.0 = —Ä–∞–∑–º–µ—Ä –∏–≥—Ä–æ–∫–∞ (256px –≤ –∏–≥—Ä–µ)</p>
                    </div>
                </div>
            </div>
            
            <!-- Welcome Panel -->
            <div id="welcome-panel" class="welcome-panel">
                <div class="welcome-content">
                    <h2>üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä –≤—Ä–∞–≥–æ–≤!</h2>
                    <p>–ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å —Ç–∏–ø—ã –≤—Ä–∞–≥–æ–≤ –¥–ª—è –∏–≥—Ä—ã.</p>
                    <div class="welcome-steps">
                        <div class="step">
                            <span class="step-num">1</span>
                            <span>–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Å–ø—Ä–∞–π—Ç—à–∏—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ PNG (8√ó8 –∫–∞–¥—Ä–æ–≤, 256√ó256 px –∫–∞–∂–¥—ã–π)</span>
                        </div>
                        <div class="step">
                            <span class="step-num">2</span>
                            <span>–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Ç–∏–ø –≤—Ä–∞–≥–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã</span>
                        </div>
                        <div class="step">
                            <span class="step-num">3</span>
                            <span>–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –∫–æ–¥ –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ –∏–≥—Ä—É</span>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    <!-- Export Modal -->
    <div id="export-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–≠–∫—Å–ø–æ—Ä—Ç –∫–æ–¥–∞</h3>
                <button class="btn-close" onclick="closeExportModal()">√ó</button>
            </div>
            <div class="modal-body">
                <p>–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —ç—Ç–æ—Ç –∫–æ–¥ –≤ <code>ENEMY_TYPES</code> –≤ —Ñ–∞–π–ª–µ <code>game/enemy.py</code>:</p>
                <textarea id="export-code" readonly></textarea>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" onclick="copyCode()">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                <button class="btn btn-secondary" onclick="closeExportModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>
    
    <script src="/static/app.js"></script>
</body>
</html>

